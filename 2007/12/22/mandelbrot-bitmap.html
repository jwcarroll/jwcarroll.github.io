<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="favicon.ico">

    <title>MandelBrot Bitmap - Techno Fattie</title>

    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C700" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/bootstrap-social.css" rel="stylesheet">

    <!-- Styles -->
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/pygments/vs.css" rel="stylesheet">

    <!-- Loading bar -->
    <script src="/js/pace.min.js"></script>

    <!-- HTML5 shiv for IE8 support -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div id="secondary" class="col-sm-3 sidebar" style="display: none;">
      <aside>

        <div class="about">
          <h4>About Josh Carroll</h4>
          <p>Computer geek, husband, father, theologian. I rock out web sites. I work for <a href="http://www.wintellect.com/">Wintellect</a>.</p>
        </div>

        <div class="socialmedia">
          <h4>Connect</h4>
          <div class="socials-sidebar">
          
            <a class="btn btn-twitter" href="https://twitter.com/jwcarroll" title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          
            <a class="btn btn-linkedin" href="https://www.linkedin.com/in/jwcarroll" title="LinkedIn">
              <i class="fa fa-linkedin"></i>
            </a>
          
            <a class="btn btn-google-plus" href="https://www.google.com/+JoshCarrollW" title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          
            <a class="btn btn-github" href="https://github.com/jwcarroll" title="GitHub">
              <i class="fa fa-github"></i>
            </a>
          
          </div> <!-- /.socials-sidebar -->
        </div>
        
        <div class="tags">
          <h4>Tags</h4>
          <ul>
          
            <li>
              <a href="/tags/f%23.html" class="tag btn btn-tag btn-sm">f#</a>
            </li>
          
            <li>
              <a href="/tags/.net.html" class="tag btn btn-tag btn-sm">.net</a>
            </li>
          
            <li>
              <a href="/tags/c%23.html" class="tag btn btn-tag btn-sm">c#</a>
            </li>
          
            <li>
              <a href="/tags/data-sets.html" class="tag btn btn-tag btn-sm">data-sets</a>
            </li>
          
            <li>
              <a href="/tags/commentary.html" class="tag btn btn-tag btn-sm">commentary</a>
            </li>
          
            <li>
              <a href="/tags/qa.html" class="tag btn btn-tag btn-sm">qa</a>
            </li>
          
            <li>
              <a href="/tags/tdd.html" class="tag btn btn-tag btn-sm">tdd</a>
            </li>
          
            <li>
              <a href="/tags/unit-testing.html" class="tag btn btn-tag btn-sm">unit-testing</a>
            </li>
          
            <li>
              <a href="/tags/security.html" class="tag btn btn-tag btn-sm">security</a>
            </li>
          
            <li>
              <a href="/tags/wpf.html" class="tag btn btn-tag btn-sm">wpf</a>
            </li>
          
            <li>
              <a href="/tags/validation.html" class="tag btn btn-tag btn-sm">validation</a>
            </li>
          
            <li>
              <a href="/tags/programming.html" class="tag btn btn-tag btn-sm">programming</a>
            </li>
          
            <li>
              <a href="/tags/sarcasm.html" class="tag btn btn-tag btn-sm">sarcasm</a>
            </li>
          
            <li>
              <a href="/tags/stackoverflow.html" class="tag btn btn-tag btn-sm">stackoverflow</a>
            </li>
          
            <li>
              <a href="/tags/dynamic.html" class="tag btn btn-tag btn-sm">dynamic</a>
            </li>
          
            <li>
              <a href="/tags/powershell.html" class="tag btn btn-tag btn-sm">powershell</a>
            </li>
          
            <li>
              <a href="/tags/angular.html" class="tag btn btn-tag btn-sm">angular</a>
            </li>
          
            <li>
              <a href="/tags/dependency-injection.html" class="tag btn btn-tag btn-sm">dependency-injection</a>
            </li>
          
            <li>
              <a href="/tags/humor.html" class="tag btn btn-tag btn-sm">humor</a>
            </li>
          
          </ul>
        </div>
        
        <div class="sidebar-links">
         <h4><a href="/archives/">Archives</a></h4>
        </div>
        
        
        <div>
            <h4>You Might Also Like:</h4>
            
            <h5>
               <a href="/2011/09/23/solving-ayende%27s-tax-woes.html">Solving Ayende's Tax Woes</a>
            </h5>
            
            <h5>
               <a href="/2011/02/11/wpf-fancy-winforms.html">WPF != Fancy Winforms</a>
            </h5>
            
            <h5>
               <a href="/2011/04/08/unit-testing-and-declarative-security-part-2.html">Unit Testing and Declarative Security, Part 2</a>
            </h5>
            
            <h5>
               <a href="/2012/04/21/validating-read-the-source-luke.html">Validating "Read the Source, Luke"</a>
            </h5>
            
            <h5>
               <a href="/2010/06/25/extending-moq-using-extension-methods.html">Extending Moq Using Extension Methods</a>
            </h5>
            
        </div>
        
        
      </aside>
    </div> <!-- /#secondary -->

    <div id="primary" class="col-sm-12">
      <div class="content">
        
        <header class="header">
          <hgroup class="pull-left">
            <h1 class="site-title">
              <a rel="home" title="Techno Fattie" href="/">
                <i class="fa fa-code"></i> Techno Fattie
              </a>
            </h1>            
          </hgroup>
          <div id="togglesidebar" class="btn btn-primary pull-right">
            <i class="fa fa-bars"></i>
          </div>
        </header> <!-- /header -->

        

<section class="post">
 <header class="entry-header">
   <img class="entry-avatar" alt="Josh Carroll" height="52" width="52" src="http://www.gravatar.com/avatar/213ff080fa03648f0b71e4f4658a8046.png?s=52">
   <h1 class="entry-title"><a href="/2007/12/22/mandelbrot-bitmap.html">MandelBrot Bitmap</a></h1>
   <p class="entry-meta">
     Posted on <a class="entry-date" href="/archives/#december-2007">22 December 2007</a> | 
     By <a class="entry-author" href="/about/">Josh Carroll</a>
     
     | Tags 
     
     <a href="/tags/f%23.html" class="btn btn-default btn-xs">f#</a> 
     
     <a href="/tags/.net.html" class="btn btn-default btn-xs">.net</a> 
     
     
   </p>
 </header>
 <div class="entry-description">
   So recently I was reading <a href="http://www.secretgeek.net">secretGeek</a> (a very underated blog I enjoy), and there was this interesting post about an <a href="http://blogs.msdn.com/lukeh/archive/2007/11/14/f.aspx">F# program</a> that Mr. Bambrick tweaked a little. The <a href="http://www.secretgeek.net/f_mandel.asp">variation</a> was interesting, and it piqued my interests into the cryptic style behind F#. However, just before I could get away with another quick read my geekish manhood was challenged.<br /><blockquote><br /><p align="left"><em>"Your mission!<br />Next step: do the same thing rendering pixels to a bitmap instead... then i could try breaking that up amongst multiple cores... no... sleep time.<br /><br />The interested reader is invited to finish this problem for me ;-)"</em><br /></p><br /><p>-- secretGeek</p></blockquote><br /><br /><p>I had to do something or I could never again return to secretGeek without being pushed around by all the other readers (they think they're so cool with their big brains). So... I went home and geeked out in front of my laptop, which is kind of like Hulking out for nerds except for the muscles and awesomeness.</p><br /><p>After installing the F# components and firing up VS, I copied the necessary file and began to make some modifications. After 3 hours of staring at documentation (Oh what I wouldn't give for some curly braces) and about 30 seconds of coding I came up with a pretty simple solution that works nicely.</p><br /><p>Here are the relevant code changes:</p><br /><br /><blockquote><code><span style="font-family:courier new;"><span style="color:#3333ff;">let</span> stepY = 0.1 / 40.0 </span><span style="font-family:courier new;"><span style="color:#009900;">//Scale goes in increments of 20 pixels for height<br /></span><span style="color:#3333ff;">let</span> stepX = 0.05 / 20.0 </span><span style="font-family:courier new;"><span style="color:#006600;"><span style="color:#009900;">//Scale goes in increments of 60 pixels for width</span><br /></span><br /><span style="color:#009900;">//Simple declarations to get the height and width of the Bitmap</span><br /><span style="color:#3333ff;">let</span> numPixelsX = (int)(3.0 / stepX)<br /><span style="color:#3333ff;">let</span> numPixelsY = (int)(2.0 / stepY)<br /><span style="color:#3333ff;">let</span> bmp = <span style="color:#3333ff;">new</span> Bitmap(numPixelsX, numPixelsY)<br /><br /></span><span style="font-family:courier new;"><span style="color:#009900;">//This is used to figure out what the current X and Y coordinates are<br />// during processing in order to set the appropriate pixels in the Bitmap</span><br /><span style="color:#3333ff;">let</span> getPosY y = (int)(Math.Abs((Math.Floor -1.0 - y) / stepY))<br /><span style="color:#3333ff;">let</span> getPosX x = (int)(Math.Abs((Math.Floor -2.0 - x) / stepX))<br /><br /><span style="color:#3333ff;">for</span> y <span style="color:#3333ff;">in</span> [-1.0..stepY..1.0] <span style="color:#3333ff;">do</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3333ff;">for</span> x <span style="color:#3333ff;">in</span> [-2.0..stepX..1.0] <span style="color:#3333ff;">do </span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3333ff;">match</span> mandelbrot (Complex.Create (x, y)) <span style="color:#3333ff;">with</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;DidNotEscape -> bmp.SetPixel(getPosX x, getPosY y, Color.FromArgb(255, 255, 255));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;Escaped e -> bmp.SetPixel(getPosX x, getPosY y, Color.FromArgb((min 9 e) * 20, 0, 0));<br />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#3333ff;">done</span>;<br /><span style="color:#3333ff;">done</span>;<br /><br />bmp.Save(String.Format(<span style="color:#990000;">"Images\\mandelBrot_{0}_{1}.bmp"</span>, numPixelsX, numPixelsY), ImageFormat.Bmp)<br />bmp.Save(String.Format(<span style="color:#990000;">"Images\\mandelBrot_{0}_{1}.png"</span>, numPixelsX, numPixelsY), ImageFormat.Png)<br />bmp.Save(String.Format(<span style="color:#990000;">"Images\\mandelBrot_{0}_{1}.jpeg"</span>, numPixelsX, numPixelsY), ImageFormat.Jpeg)</span></code></blockquote><br /><br /><p>And here is a sample of what the output looks like:</p><br /><p><a href="http://2.bp.blogspot.com/_zrLYGpcNAqw/R2y6BEgHIgI/AAAAAAAAADc/ak_RH1D9FFE/s1600-h/mandelBrot_300_200.jpeg"><img id="BLOGGER_PHOTO_ID_5146693001728696834" style="DISPLAY: block; MARGIN: 0px auto 10px; CURSOR: hand; TEXT-ALIGN: center" alt="" src="http://2.bp.blogspot.com/_zrLYGpcNAqw/R2y6BEgHIgI/AAAAAAAAADc/ak_RH1D9FFE/s320/mandelBrot_300_200.jpeg" border="0" /></a></p><br /><p>Cheers,</p><p>Josh<br /></p>

 </div>
 

<div class="footer">
    <h4>Share This Post</h4>

    <div class="socials-footer">
        <a class="btn btn-twitter" href="http://twitter.com/share?text=MandelBrot Bitmap by @jwcarroll&url=http://www.technofattie.com/2007/12/22/mandelbrot-bitmap.html"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fa fa-twitter"></i>
        </a>
        <a class="btn btn-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.technofattie.com/2007/12/22/mandelbrot-bitmap.html"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fa fa-facebook"></i>
        </a>
        <a class="btn btn-google-plus" href="https://plus.google.com/share?url=http://www.technofattie.com/2007/12/22/mandelbrot-bitmap.html"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
            <i class="fa fa-google-plus"></i>
        </a>
    </div>
</div>
</section>

<div class="comments">
 <div id="disqus_thread"></div>
 <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'technofattie'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
 </script>
 <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

        <footer class="footer">
          <p>© <a href="/about/">Josh Carroll</a> 2014. All right reserved.</p>
          <div class="socials-footer">
          
            <a class="btn btn-twitter" href="https://twitter.com/jwcarroll" title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          
            <a class="btn btn-linkedin" href="https://www.linkedin.com/in/jwcarroll" title="LinkedIn">
              <i class="fa fa-linkedin"></i>
            </a>
          
            <a class="btn btn-google-plus" href="https://www.google.com/+JoshCarrollW" title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          
            <a class="btn btn-github" href="https://github.com/jwcarroll" title="GitHub">
              <i class="fa fa-github"></i>
            </a>
          
          </div> <!-- /.socials-footer -->
        </footer> <!-- /footer -->

      </div>
    </div> <!-- /#primary -->

    <!-- Scripts -->
    <script src="/js/jquery-1.11.0.min.js"></script>
    <script src="/js/custom.js"></script>

  </body>
</html>