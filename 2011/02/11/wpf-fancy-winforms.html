<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Josh Carroll's Blog about Programming, Techno and Fatties... ok mostly just programming.">
    
    <meta name="author" content="Josh Carroll">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <title>WPF != Fancy Winforms - Techno Fattie</title>

    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C700" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/bootstrap-social.css" rel="stylesheet">

    <!-- Styles -->
    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/pygments/syntax.css" rel="stylesheet">

    <!-- Loading bar -->
    <script src="/js/pace.min.js"></script>

    <!-- HTML5 shiv for IE8 support -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->

    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47962022-1', 'technofattie.com');
    ga('send', 'pageview');

</script>
    
  </head>

  <body itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="url" content="http://www.technofattie.com" />
    <meta itemprop="description" content="Josh Carroll's Blog about Programming, Techno and Fatties... ok mostly just programming." />
    <div id="secondary" class="col-sm-3 sidebar" style="display: none;">
      <aside>

        <div class="about" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <h4>About <span itemprop="name">Josh Carroll</span></h4>
          <p itemprop="description">Computer geek, husband, father, theologian. I rock out web sites. I work for <span itemprop="worksFor" itemscope itemtype="http://schema.org/Organization"><a href="http://www.wintellect.com/" itemprop="url"><span itemprop="name">Wintellect</span></a></span>.</p>
        </div>

        <div class="socialmedia">
          <h4>Connect</h4>
          <div class="socials-sidebar">
          
            <a class="btn btn-twitter" href="https://twitter.com/jwcarroll"  rel="nofollow"  title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          
            <a class="btn btn-linkedin" href="https://www.linkedin.com/in/jwcarroll"  rel="nofollow"  title="LinkedIn">
              <i class="fa fa-linkedin"></i>
            </a>
          
            <a class="btn btn-google-plus" href="https://www.google.com/+JoshCarrollW?rel=author"  rel="author"  title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          
            <a class="btn btn-github" href="https://github.com/jwcarroll"  rel="nofollow"  title="GitHub">
              <i class="fa fa-github"></i>
            </a>
          
          </div> <!-- /.socials-sidebar -->
        </div>
        
        <div class="tags">
          <h4>Tags</h4>
          <ul>
          
            <li>
              <a href="/tags/f%23.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">f#</span></a>
            </li>
          
            <li>
              <a href="/tags/dot-net.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">dot-net</span></a>
            </li>
          
            <li>
              <a href="/tags/c%23.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">c#</span></a>
            </li>
          
            <li>
              <a href="/tags/data-sets.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">data-sets</span></a>
            </li>
          
            <li>
              <a href="/tags/commentary.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">commentary</span></a>
            </li>
          
            <li>
              <a href="/tags/qa.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">qa</span></a>
            </li>
          
            <li>
              <a href="/tags/tdd.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">tdd</span></a>
            </li>
          
            <li>
              <a href="/tags/unit-testing.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">unit-testing</span></a>
            </li>
          
            <li>
              <a href="/tags/security.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">security</span></a>
            </li>
          
            <li>
              <a href="/tags/wpf.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">wpf</span></a>
            </li>
          
            <li>
              <a href="/tags/validation.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">validation</span></a>
            </li>
          
            <li>
              <a href="/tags/programming.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">programming</span></a>
            </li>
          
            <li>
              <a href="/tags/sarcasm.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">sarcasm</span></a>
            </li>
          
            <li>
              <a href="/tags/stackoverflow.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">stackoverflow</span></a>
            </li>
          
            <li>
              <a href="/tags/dynamic.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">dynamic</span></a>
            </li>
          
            <li>
              <a href="/tags/powershell.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">powershell</span></a>
            </li>
          
            <li>
              <a href="/tags/angular.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">angular</span></a>
            </li>
          
            <li>
              <a href="/tags/javascript.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">javascript</span></a>
            </li>
          
            <li>
              <a href="/tags/dependency-injection.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">dependency-injection</span></a>
            </li>
          
            <li>
              <a href="/tags/humor.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">humor</span></a>
            </li>
          
            <li>
              <a href="/tags/jekyll.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">jekyll</span></a>
            </li>
          
            <li>
              <a href="/tags/github.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">github</span></a>
            </li>
          
            <li>
              <a href="/tags/bootstrap.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">bootstrap</span></a>
            </li>
          
            <li>
              <a href="/tags/introspection.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">introspection</span></a>
            </li>
          
            <li>
              <a href="/tags/ng-transform.html" class="tag btn btn-tag btn-sm"><span itemprop="keywords">ng-transform</span></a>
            </li>
          
          </ul>
        </div>
        
        <div class="sidebar-links">
         <h4><a href="/archives/">Archives</a></h4>
        </div>
        
        
        <div>
            <h4>You Might Also Like:</h4>
            
            <h5>
               <a href="/2011/09/23/solving-ayende%27s-tax-woes.html">Solving Ayende's Tax Woes</a>
            </h5>
            
            <h5>
               <a href="/2014/03/21/five-guidelines-for-avoiding-scope-soup-in-angular.html">5 Guidelines For Avoiding Scope Soup in Angular</a>
            </h5>
            
            <h5>
               <a href="/2010/06/25/extending-moq-using-extension-methods.html">Extending Moq Using Extension Methods</a>
            </h5>
            
            <h5>
               <a href="/2012/08/31/prototypal-inheritance-in-c%23.html">Prototypal Inheritance in C#</a>
            </h5>
            
            <h5>
               <a href="/2011/02/09/unit-testing-and-declarative-security-part-1.html">Unit Testing and Declarative Security, Part 1</a>
            </h5>
            
        </div>
        
        
      </aside>
    </div> <!-- /#secondary -->

    <div id="primary" class="col-sm-12">
      <div class="content">
        
        <header class="header">
          <hgroup class="pull-left">
            <h1 class="site-title">
              <a rel="home" title="Techno Fattie" href="/">
                <i class="fa fa-code"></i> <span itemprop="name">Techno Fattie</span>
              </a>
            </h1>            
          </hgroup>
          <div id="togglesidebar" class="btn btn-primary pull-right">
            <i class="fa fa-bars"></i>
          </div>
        </header> <!-- /header -->

        

<section class="post" itemscope itemtype="http://schema.org/BlogPosting">
 <header class="entry-header">
   <img class="entry-avatar" alt="Josh Carroll" height="52" width="52" src="http://www.gravatar.com/avatar/213ff080fa03648f0b71e4f4658a8046.png?s=52">
   <h1 class="entry-title"><a href="/2011/02/11/wpf-fancy-winforms.html" itemprop="url"><span itemprop="name">WPF != Fancy Winforms</span></a></h1>
   <p class="entry-meta">
     Posted on <a class="entry-date" href="/archives/#february-2011"><time itemprop="dateCreated" datetime="2011-02-11T00:00:00-05:00">11 February 2011</time></a> |
     By <span itemprop="author" itemscope itemtype="http://schema.org/Person"><a itemprop="url" class="entry-author" href="/about/"><span itemprop="name">Josh Carroll</span></a></span>
     
     | Tags 
     
     <a href="/tags/c%23.html" class="btn btn-default btn-xs"><span itemprop="keywords">c#</span></a>
     
     <a href="/tags/dot-net.html" class="btn btn-default btn-xs"><span itemprop="keywords">dot-net</span></a>
     
     <a href="/tags/wpf.html" class="btn btn-default btn-xs"><span itemprop="keywords">wpf</span></a>
     
     
   </p>
 </header>
 <div class="entry-description" itemprop="articleBody">
   I'm a big fan of Stackoverflow, and I was just recently looking at this <a href="http://stackoverflow.com/questions/4965023/c-check-if-text-file-has-content">very simple question regarding changing button color.</a> On the surface it seems this would warrant a very simple answer, and indeed <a href="http://stackoverflow.com/questions/4965023/c-check-if-text-file-has-content/4965058#4965058">Chris' Answer</a> was simple, straightforward and to the point.<br /><br />However, it feels too much like how I would have done things back in the dark ages of WinForms. There seems to be this misconception that WPF is just a fancier version of the old Win32 standby. <i>(note I am not trying to imply this is what Chris thinks, it merely serves as a convenient backdrop for this post)</i><br /><br />But WPF is not even a cousin, or distant relative of WinForms. If WPF saw WinForms in the hallway it would beat him up and take his lunch money from him. Anyway, that is enough of a rant. On with what started out as my original answer to the question, which turned into this epic post...<br /><br /><b><span class="Apple-style-span" style="font-size: large;"><u>Original Answer Starts Here:</u></span></b><br /><br />So Chris' suggestion is pretty straightforward, and it is certainly easier to implement than what I am about to show you ;) However, if you are going to venture into the world of WPF then you need to experience what it has to offer.<br /><br />In my opinion the two biggest advantages in WPF are:<br /><ol><li>The power and flexibility of the declarative model</li><li>An incredibly rich data binding infrastructure</li></ol>Granted those are immensely deep topics within WPF, but without at least gaining a minimal understanding of those topics, it will be like driving a Lamborghini around in first gear all the time.<br /><br />That being said, you can jump to the full solution <a href="#fullsolution">here</a>, copy and paste it into a clean solution, and play with it for a second. I'll be waiting patiently here to give you a detailed explanation of what is going on. <br /><br />Ready? Ok then, lets get going.<br /><br />Lets start with the core logic of the application, your requirements are:<br /><ol><li><b>Examine a file on disk</b></li><li><b>Change the appearance of a button based on content length</b></li><li><b>Update the appearance of the button when the file changes</b></li></ol>Since the appearance of the button is presentation specific, we simply won't worry about that when implementing our core logic. So what we really need to do is monitor the file for changes, and update a local variable with the length of the file, if it exists.<br /><br />This is a perfect job for a <a href="http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">FileSystemWatcher</span></a>. The file watcher kicks off a thread in the background which utilizes some low level Win32 API's to monitor events on the file system. We can tie into those events via the watcher, and handle them in our application asynchonously.<br /><br />Creating a new watcher is pretty simple and all we really need to provide is the Path. Here I am simply using the current location of the Executing Assembly for the base path. The second thing you see here is the Filter property. This works just like the filter you would use in the command line.<br /><br /><pre class="c#" name="code">private FileSystemWatcher _fileWatcher;<br />private const String FileToWatch = "tempfile.txt";<br /><br />public void InitializeFileWatcher()<br />{<br />    _fileWatcher = new FileSystemWatcher();<br />    _fileWatcher.Path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);<br />    _fileWatcher.Filter = "*.txt";<br /><br />    //Snip...<br />}<br /></pre><br />Next we want to subscribe to the different types of events available, and tell the watcher to start doing it's thing. In this case our event handler is just a thin wrapper around a simple method that does all the "heavy" lifting. Lastly we call our <span class="Apple-style-span" style="background-color: #cccccc; font-family: 'Courier New', Courier, monospace;">UpdateFileLength</span><span class="Apple-style-span" style="background-color: white; font-family: 'Courier New', Courier, monospace;"> </span>method directly because we need to know what the status of the file is right now, without waiting on an event from our watcher.<br /><br /><pre class="c#" name="code">public void InitializeFileWatcher()<br />{<br />    //Snip...<br /><br />    _fileWatcher.Created += fileWatcher_Handler;<br />    _fileWatcher.Changed += fileWatcher_Handler;<br />    _fileWatcher.Deleted += fileWatcher_Handler;<br />    _fileWatcher.Renamed += fileWatcher_Handler;<br /><br />    _fileWatcher.EnableRaisingEvents = true;<br /><br />    UpdateFileLength(Path.Combine(_fileWatcher.Path, FileToWatch));<br />}<br /><br />private void UpdateFileLength(string filePath)<br />{<br />    Int64? length = null;<br /><br />    if (Path.GetFileName(filePath) == FileToWatch)<br />    {<br />        var fi = new FileInfo(filePath);<br /><br />        if (fi.Exists)<br />            length = fi.Length;<br />    }<br /><br />    Dispatcher.Invoke((Action)(<br />        () =&gt; FileContentLength = length)<br />    );<br />}<br /><br />void fileWatcher_Handler(object sender, FileSystemEventArgs e)<br />{<br />    UpdateFileLength(e.FullPath);<br />}<br /></pre><br />The UpdateFileLength method is pretty simple. It checks to see if the file is the one we are looking for, extracts the length if it exists, and updates a property on our MainWindow. Something that may seem a bit odd however, is the use of the <a href="http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">Dispatcher</span></a> and an anonymous method in order to set that property.<br /><br />Remember how I said that the <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">FileSystemWatcher</span> kicks off a background thread. Well, technically <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">UpdateFileLength</span> could be getting executed from a different thread than the UI thread. And well... it's a big NO NO to access things in the UI from another thread. Without going into a a lot of detail, the Dispatcher is responsible for scheduling things to happen on the UI thread in WPF. Here we are ensuring that no matter what thread executes this method, that that line will always be executed on the UI thread.<br /><br />Ok, so the last little bit is our property we use to store the current length of the file we are monitoring, but it is no ordinary property.<br /><br /><pre class="c#" name="code">public static readonly DependencyProperty FileContentLengthProperty = DependencyProperty.Register(<br />    "FileContentLength",<br />    typeof(Int64?),<br />    typeof(MainWindow),<br />    new UIPropertyMetadata(null));<br /><br />public Int64? FileContentLength<br />{<br />    get<br />    {<br />        return (Int64?)GetValue(FileContentLengthProperty);<br />    }<br />    set<br />    {<br />        SetValue(FileContentLengthProperty, value);<br />    }<br />}<br /></pre><br />What you are staring at here is known as a <a href="http://msdn.microsoft.com/en-us/library/ms752914.aspx">DependencyProperty</a>, and they are pretty foundational to how WPF works, so take some time to learn about them. For our purposes, just know that what this provides for us is a way for WPF to monitor changes to our property, which allows for all sorts of fun stuff in the UI.<br /><br />Now, on to the UI and where the real magic happens. Did you notice we didn't ever reference any buttons or set colors in the code behind? That's because 99% of the time in WPF there is no need to. The declarative model we have in <a href="http://msdn.microsoft.com/en-us/library/ms752059.aspx">XAML</a> combined with the rich data binding ecosystem in WPF gives us the freedom to finally have true seperation of concerns between presentation and logic.<br /><br />The first order of business is to set the <a href="http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">DataContext</span></a> on the Window itself so that we can access all of the properties defined in our code behind. Ok there is only one, but we still need it.<br /><br /><pre class="xml" name="code">DataContext="{Binding RelativeSource={RelativeSource Self}}"<br /></pre><br />Next we need a button on our window. Ok, nothing special going on here, except that there is no content, no coloring, just a Style property bound to some static resource called <span class="Apple-style-span" style="color: #cc0000;">"FileBoundButton"</span><br /><br /><textarea class="xml" name="code"><br /><button Style="{StaticResource FileBoundButton}"                  Name="button1" /><br /></textarea><br /><br /><a href="http://msdn.microsoft.com/en-us/library/ms745683.aspx">Styles in WPF are another big complex topic</a>, but just know that this isn't anything like CSS. You can set virtually any property on an element via a style, and include declarative triggers to change the appearance based on events, data, or even other elements. This is precisely how we are going to achieve the visual affect you are after and then some!<br /><br /><textarea class="xml" name="code"><br /><style x:Key="FileBoundButton" TargetType="ContentControl">    <setter Property="Background" Value="Green" />    <setter Property="Content" Value="{Binding FileContentLength}" />    <Style.Triggers>        <datatrigger Binding="{Binding FileContentLength}" Value="{x:Null}">            <setter Property="Background" Value="LightGray" />            <setter Property="Content" Value="No File!" />        </DataTrigger>        <datatrigger Binding="{Binding FileContentLength}" Value="0">            <setter Property="Background" Value="Red" />        </DataTrigger>    </Style.Triggers></Style><br /></textarea><br /><br />The style we are using is declared as a static resource on the window itself. You need a name if you want to be able to refer to it later, and using a TargetType of ContentControl instead of a Button means we could reuse this style a lot of different elements, not just a button.<br /><br />We set the Background property to Green initially, and we also set the Content equal to the value of our <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">FileContentLength</span> property. Then we make use of DataTriggers to alter those settings based on the value of FileContentLength. The syntax of a DataTrigger can be a bit wonky at first, but if you were to spell it out in pseudo-code it would sound something like this:<br /><br /><pre>set the Background property to <span class="Apple-style-span" style="background-color: lime;">Green</span><br />set the Content to DataContext.FileContentLength<br /><br /><span class="Apple-style-span" style="color: blue;">IF</span> the value of DataContext.FileContentLength is <span class="Apple-style-span" style="color: red;">NULL</span><br />    <span class="Apple-style-span" style="color: blue;">THEN</span> set the Background property to <span class="Apple-style-span" style="background-color: #cccccc;">LightGray</span> <span class="Apple-style-span" style="color: blue;">AND</span><br />         set the Content to "No File!"<br /><span class="Apple-style-span" style="color: blue;">ELSE IF</span> the value of DataContext.FileContentLength is <span class="Apple-style-span" style="color: red;">0</span><br />    <span class="Apple-style-span" style="color: blue;">THEN</span> set the Background property to <span class="Apple-style-span" style="background-color: red;">Red</span><br /></pre><br />You might be wondering exactly <i>what</i>&nbsp;DataContext this is referring to. Essentially whatever framework element this style happens to be applied to. Because we didn't set the Button's DataContext explicitely it will inherit the DataContext of the Window. But be careful! Where the DataContext comes from isn't always apparent.<br /><br />Now, if you put all this together and launch the app for the first time you should end up with a small window with a gray button in it that says "No File!"<br /><br /><center><img src="https://lh6.googleusercontent.com/_zrLYGpcNAqw/TVTfmg2jvoI/AAAAAAAAA18/PrNnn4ucwoc/s800/FileWatcher_NoFile.png"></img></center><br /><br />Without closing the program, navigate to the executing directory of your application "[ProjectFolder]\bin\Debug" and create a new text file named "tempfile.txt" Now you should see the button change color to red and display a "0" since the file is empty.<br /><br /><center><img src="https://lh4.googleusercontent.com/_zrLYGpcNAqw/TVTfmYRStiI/AAAAAAAAA10/pBNoBbSkEc0/s800/FileWatcher_EmptyFile.png"></img></center><br /><br />Open the newly created text file and write something in there. Save the file and again, watch as your button magically changes before your eyes to green, and displaying "N" where N is the number of characters in your text file.<br /><br /><center><img src="https://lh3.googleusercontent.com/_zrLYGpcNAqw/TVTfmQqJ5tI/AAAAAAAAA14/7jZ_skxgL4o/s800/FileWatcher_FileWithContent.png"></img></center><br /><br />If you actually made it through this whole thing, then you have hopefully been opened up to a whole new world of possibilities by using WPF. Just remember that it is a very, very deep technology and you won't learn it over night. Here are some resources to get you started on your journey though.<br /><br /><a href="http://msdn.microsoft.com/en-us/library/ms754130.aspx">The MSDN Walk Through.</a> Heavy reading, but worth it.<br /><a href="http://www.wpftutorial.net/christian.php">Christian Moser's WPF Tutorial Site.</a> Lots of easy to digest samples.<br /><a href="http://stackoverflow.com/questions/tagged/wpf">WPF Questions on Stackoverflow</a><br /><br /><a name="fullsolution"></a><br /><br />`MainWindow.xaml`:<br /><br /><textarea class="xml:collapse" name="code"><br /><window x:Class="TechnoFattie.WPF.MainWindow"         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"         mc:Ignorable="d" Height="86" Width="174"         Title="File Watcher Example"         DataContext="{Binding RelativeSource={RelativeSource Self}}"><br /><Window.Resources><br /><style x:Key="FileBoundButton" TargetType="Control">            <setter Property="Background" Value="Green" />            <Style.Triggers>                <datatrigger Binding="{Binding FileContentLength}" Value="{x:Null}">                    <setter Property="Background" Value="LightGray" />                </DataTrigger>                <datatrigger Binding="{Binding FileContentLength}" Value="0">                    <setter Property="Background" Value="Red" />                </DataTrigger>            </Style.Triggers>        </Style><br /></Window.Resources><br /><grid x:Name="LayoutRoot"><br /><button Content="{Binding FileContentLength}"                  Style="{StaticResource FileBoundButton}"                  Name="button1" /><br /></Grid><br /></Window><br /></textarea><br /><br />`MainWindow.xaml.cs`:<br /><br /><pre class="c#:collapse" name="code">public partial class MainWindow : Window<br />{<br />    private FileSystemWatcher _fileWatcher;<br />    private const String FileToWatch = "tempfile.txt";<br /><br />    public MainWindow()<br />    {<br />        InitializeComponent();<br />            <br />        InitializeFileWatcher();<br />    }<br /><br />    public void InitializeFileWatcher()<br />    {<br />        _fileWatcher = new FileSystemWatcher();<br />        _fileWatcher.Path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);<br />        _fileWatcher.Filter = "*.txt";<br /><br />        _fileWatcher.Created += fileWatcher_Handler;<br />        _fileWatcher.Changed += fileWatcher_Handler;<br />        _fileWatcher.Deleted += fileWatcher_Handler;<br />        _fileWatcher.Renamed += fileWatcher_Handler;<br /><br />        _fileWatcher.EnableRaisingEvents = true;<br /><br />        UpdateFileLength(Path.Combine(_fileWatcher.Path, FileToWatch));<br />    }<br /><br />    private void UpdateFileLength(string filePath)<br />    {<br />        Int64? length = null;<br /><br />        if (Path.GetFileName(filePath) == FileToWatch)<br />        {<br />            var fi = new FileInfo(filePath);<br /><br />            if (fi.Exists)<br />                length = fi.Length;<br />        }<br /><br />        Dispatcher.Invoke((Action)(() =&gt; FileContentLength = length));<br />    }<br /><br />    void fileWatcher_Handler(object sender, FileSystemEventArgs e)<br />    {<br />        UpdateFileLength(e.FullPath);<br />    }<br /><br />    public Int64? FileContentLength<br />    {<br />        get<br />        {<br />            return (Int64?)GetValue(FileContentLengthProperty);<br />        }<br />        set<br />        {<br />            SetValue(FileContentLengthProperty, value);<br />        }<br />    }<br /><br />    public static readonly DependencyProperty FileContentLengthProperty = DependencyProperty.Register(<br />        "FileContentLength",<br />        typeof(Int64?),<br />        typeof(MainWindow),<br />        new UIPropertyMetadata(null));<br />}<br /></pre>

 </div>
 

<div class="footer">
    <h4>Share This Post</h4>

    <div class="socials-footer">
        <a class="btn btn-twitter" href="http://twitter.com/share?text=WPF != Fancy Winforms by @jwcarroll&url=http://www.technofattie.com/2011/02/11/wpf-fancy-winforms.html" rel="nofollow"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fa fa-twitter"></i>
        </a>
        <a class="btn btn-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.technofattie.com/2011/02/11/wpf-fancy-winforms.html" rel="nofollow"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fa fa-facebook"></i>
        </a>
        <a class="btn btn-google-plus" href="https://plus.google.com/share?url=http://www.technofattie.com/2011/02/11/wpf-fancy-winforms.html" rel="nofollow"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
            <i class="fa fa-google-plus"></i>
        </a>
    </div>
</div>
</section>

<div class="comments">
 <div id="disqus_thread"></div>
 <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'technofattie'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
 </script>
 <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

        <footer class="footer">
          <p itemprop="author" itemscope itemtype="http://schema.org/Person">Â© <a href="/about/" itemprop="url"><span itemprop="name">Josh Carroll</span></a> 2014. All right reserved.</p>
          <div class="socials-footer">
          
            <a class="btn btn-twitter" href="https://twitter.com/jwcarroll" title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          
            <a class="btn btn-linkedin" href="https://www.linkedin.com/in/jwcarroll" title="LinkedIn">
              <i class="fa fa-linkedin"></i>
            </a>
          
            <a class="btn btn-google-plus" href="https://www.google.com/+JoshCarrollW?rel=author" title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          
            <a class="btn btn-github" href="https://github.com/jwcarroll" title="GitHub">
              <i class="fa fa-github"></i>
            </a>
          
          </div> <!-- /.socials-footer -->
        </footer> <!-- /footer -->

      </div>
    </div> <!-- /#primary -->

    <!-- Scripts -->
    <script src="/js/jquery-1.11.0.min.js"></script>
    <script src="/js/custom.js"></script>

  </body>
</html>